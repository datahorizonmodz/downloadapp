<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ULTRA MOTION - Download</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* --- PALETTE & VARS --- */
      --primary: #3b82f6; 
      --primary-gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      --secondary-gradient: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      --success: #10b981;
      
      /* Light Mode (Default per request) */
      --bg: #f8fafc;
      --bg-gradient: linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%);
      --card-bg: rgba(255, 255, 255, 0.85);
      --card-border: rgba(0, 0, 0, 0.05);
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --shadow: 0 10px 25px rgba(148, 163, 184, 0.15);
      --modal-bg: rgba(255, 255, 255, 0.95);
    }
    
    body.dark-mode {
      /* Dark Mode Override */
      --bg: #0f172a;
      --bg-gradient: radial-gradient(circle at top center, #1e293b 0%, #0f172a 100%);
      --card-bg: rgba(30, 41, 59, 0.7);
      --card-border: rgba(255, 255, 255, 0.08);
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      --modal-bg: rgba(30, 41, 59, 0.95);
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'Quicksand', sans-serif;
      background: var(--bg);
      background-image: var(--bg-gradient);
      background-attachment: fixed;
      color: var(--text-primary);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      transition: color 0.4s, background 0.4s;
    }

    .container { 
      max-width: 900px; 
      margin: 0 auto; 
      padding-bottom: 80px;
    }
    
    /* HEADER */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
      padding: 10px 5px;
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--bg); /* Fallback */
      background: rgba(var(--bg), 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 0 0 20px 20px;
      margin: -20px -20px 30px -20px;
      padding: 20px 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }
    
    .header-left { display: flex; align-items: center; gap: 12px; }
    
    .logo-text {
      font-weight: 800;
      font-size: 24px;
      letter-spacing: -1px;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-decoration: none;
      cursor: pointer;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    /* TOGGLES */
    .toggle-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 24px;
      padding: 5px;
      transition: transform 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      width: 40px;
      height: 40px;
    }
    .toggle-btn:hover { background: rgba(0,0,0,0.05); transform: scale(1.1); }
    body.dark-mode .toggle-btn:hover { background: rgba(255,255,255,0.1); }

    .switch-track {
      width: 50px;
      height: 26px;
      background: #cbd5e1;
      border-radius: 20px;
      position: relative;
      cursor: pointer;
      transition: 0.3s;
    }
    body.dark-mode .switch-track { background: var(--primary); }
    .switch-thumb {
      width: 20px;
      height: 20px;
      background: #fff;
      border-radius: 50%;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: 0.3s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    body.dark-mode .switch-thumb { transform: translateX(24px); }

    /* NOTICE BOX */
    .notice {
      background: rgba(245, 158, 11, 0.1);
      padding: 20px;
      border: 1px solid rgba(245, 158, 11, 0.3);
      color: var(--text-primary);
      border-radius: 16px;
      margin-bottom: 30px;
      font-size: 14px;
      line-height: 1.6;
      backdrop-filter: blur(5px);
      position: relative;
      overflow: hidden;
    }
    .notice::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 6px;
      background: #f59e0b;
    }
    .notice h3 { margin: 0 0 10px 0; color: #d97706; display: flex; align-items: center; gap: 8px; }
    body.dark-mode .notice h3 { color: #fbbf24; }
    .notice ul { margin: 10px 0; padding-left: 20px; }
    .notice li { margin-bottom: 5px; }

    /* VERSIONS GRID */
    .versions { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
      gap: 25px; 
    }
    
    .version-card { 
      background: var(--card-bg);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid var(--card-border);
      padding: 25px; 
      border-radius: 24px; 
      box-shadow: var(--shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .version-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      border-color: rgba(59, 130, 246, 0.3);
    }
    
    .app-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #1e293b, #0f172a);
      border-radius: 22px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 32px;
      font-weight: bold;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .version-card h2 {
      margin: 5px 0;
      font-size: 18px;
      color: var(--primary);
    }
    
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      margin-bottom: 12px;
      background: rgba(59, 130, 246, 0.1);
      color: var(--primary);
    }

    .version-card p {
      margin: 0 0 25px 0;
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    /* BUTTONS */
    .btn {
      width: 100%;
      padding: 14px 20px;
      border-radius: 16px;
      background: var(--primary-gradient);
      color: #fff;
      border: none;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
      transition: all 0.2s;
      letter-spacing: 0.5px;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
      filter: brightness(1.1);
    }
    .btn:active { transform: scale(0.98); }

    /* POPUP MODALS */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    .modal-overlay.active { opacity: 1; pointer-events: auto; }

    .modal-content {
      background: var(--modal-bg);
      padding: 30px;
      border-radius: 24px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
      border: 1px solid var(--card-border);
      transform: scale(0.9);
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .modal-overlay.active .modal-content { transform: scale(1); }

    .modal-title { font-size: 20px; margin-bottom: 25px; font-weight: 700; color: var(--text-primary); }
    
    .modal-grid { display: flex; flex-direction: column; gap: 15px; }
    
    .option-btn {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
      padding: 15px;
      border-radius: 14px;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .option-btn:hover {
      background: var(--primary);
      color: #fff;
    }
    /* Dark Theme Option specific style */
    .option-btn.dark-opt { border-color: #475569; color: var(--text-secondary); }
    .option-btn.dark-opt:hover { background: #1e293b; color: #fff; border-color: #1e293b; }

    /* WHATSAPP JOIN POPUP CSS */
    .wa-backdrop {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.3);
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); /* Strong blur */
      z-index: 1999;
      opacity: 0; pointer-events: none;
      transition: opacity 0.5s ease;
    }
    .wa-backdrop.active { opacity: 1; pointer-events: auto; }

    .wa-popup {
      position: fixed;
      left: 50%;
      bottom: 20px; /* Entrance start */
      transform: translateX(-50%);
      width: 20px; height: 20px; /* Small circle start */
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.4);
      border-radius: 50%;
      box-shadow: 0 0 0 rgba(0,0,0,0);
      z-index: 2000; /* Highest */
      overflow: hidden;
      transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1); /* Liquid/Smooth iOS curve */
      display: flex; flex-direction: column; align-items: center; justify-content: center;
    }

    body.dark-mode .wa-popup {
      background: rgba(30, 41, 59, 0.6);
      border-color: rgba(255, 255, 255, 0.1);
    }

    /* Active State (Rectangle in Center) */
    .wa-popup.active {
      bottom: 50%;
      transform: translate(-50%, 50%);
      width: 85%; max-width: 340px;
      height: auto; min-height: 280px;
      border-radius: 30px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      background: rgba(255, 255, 255, 0.85);
    }
    body.dark-mode .wa-popup.active {
      background: rgba(15, 23, 42, 0.85);
    }

    .wa-content {
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.4s ease 0.5s, transform 0.4s ease 0.5s; /* Delay for morph */
      padding: 30px 20px;
      text-align: center;
      width: 100%;
      display: flex; flex-direction: column; align-items: center; gap: 20px;
    }

    .wa-popup.active .wa-content { opacity: 1; transform: scale(1); }

    .wa-text {
      font-size: 18px; font-weight: 700;
      color: var(--text-primary);
      line-height: 1.5;
      margin-top: 10px;
    }

    .wa-btn {
      background: #25D366; /* WhatsApp Green */
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
      transition: transform 0.2s;
      text-decoration: none;
      display: inline-block;
    }
    .wa-btn:hover { transform: scale(1.05); }

    .wa-close {
      position: absolute;
      top: 15px; right: 15px;
      background: rgba(100, 116, 139, 0.1);
      border: none;
      border-radius: 50%;
      width: 32px; height: 32px;
      cursor: pointer;
      color: var(--text-secondary);
      font-weight: bold;
      display: flex; align-items: center; justify-content: center;
      opacity: 0;
      transition: opacity 0.4s ease 0.6s;
      /* FIX: Ensure z-index is higher than content and pointer events work */
      z-index: 50;
      pointer-events: auto;
    }
    .wa-popup.active .wa-close { opacity: 1; }
    .wa-close:hover { background: rgba(100, 116, 139, 0.2); }

    /* FAB & NOTIFICATION */
    .fab-container { position: fixed; bottom: 30px; right: 30px; z-index: 900; }
    
    .fab {
      width: 60px; height: 60px;
      background: var(--secondary-gradient);
      color: #fff;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 24px;
      box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);
      cursor: pointer;
      border: none;
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      z-index: 902;
    }
    .fab:hover { transform: scale(1.1); }

    .store-notif {
      position: absolute;
      bottom: 5px; right: 5px; /* Origin at FAB center roughly */
      background: var(--text-primary);
      color: var(--bg);
      padding: 15px 40px 15px 20px;
      border-radius: 30px;
      white-space: nowrap;
      font-size: 14px;
      font-weight: 600;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      opacity: 0;
      transform: scale(0);
      transform-origin: bottom right;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      pointer-events: none;
      z-index: 901;
      width: 300px;
    }
    body.dark-mode .store-notif { background: #fff; color: #0f172a; }
    
    .store-notif.show { opacity: 1; transform: scale(1); pointer-events: auto; }

    .close-notif {
      position: absolute;
      right: 10px; top: 50%;
      transform: translateY(-50%);
      background: none; border: none;
      font-size: 18px; cursor: pointer;
      color: inherit;
      opacity: 0.6;
    }
    .close-notif:hover { opacity: 1; }

    /* FOOTER */
    footer { text-align: center; margin-top: 50px; color: var(--text-secondary); font-size: 13px; }

    /* ANIMATIONS */
    .fade-up { animation: fadeUp 0.6s ease forwards; opacity: 0; transform: translateY(20px); }
    @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

  </style>
</head>
<body> <!-- Default Light Mode via CSS variables -->

  <div class="container">
    
    <!-- HEADER -->
    <header>
      <div class="header-left">
        <a href="https://youtube.com/@dtzns?si=nI7U6pma3iUb1oxF" target="_blank" class="logo-text">DATZON</a>
      </div>
      
      <div class="header-controls">
        <!-- Language Toggle -->
        <button class="toggle-btn" id="lang-btn" title="Switch Language">
          <span id="lang-icon">üáÆüá©</span>
        </button>
        
        <!-- Theme Toggle -->
        <div class="switch-track" id="theme-toggle" title="Toggle Theme">
          <div class="switch-thumb"></div>
        </div>
      </div>
    </header>

    <!-- NOTICE BOX -->
    <div class="notice fade-up" style="animation-delay: 0.1s;">
      <h3 id="notice-title">‚ö†Ô∏è Perhatian</h3>
      <div id="notice-content">
        <p><strong>PENTING:</strong> Jika Anda adalah pengguna lama Ultra Motion, <strong>WAJIB</strong> melakukan backup semua project terlebih dahulu sebelum update.</p>
        <ul>
          <li>Backup data Anda</li>
          <li>Uninstall Ultra Motion lama</li>
          <li>Install versi terbaru</li>
        </ul>
        <p><strong>PILIHAN:</strong> Gunakan versi <strong>CLONE</strong> untuk mencoba tanpa menghapus aplikasi lama.</p>
      </div>
    </div>

    <!-- VERSIONS GRID -->
    <div class="versions">
      
      <!-- VERSION A -->
      <div class="version-card fade-up" style="animation-delay: 0.2s;">
        <div class="app-icon">UM</div>
        <div class="badge" id="badge-old">Stable Version</div>
        <h2 id="v1-title">ULTRA MOTION v5.0.260</h2>
        <p id="v1-desc">Versi lama yang lebih stabil. Gunakan ini jika perangkat Anda mengalami masalah dengan versi terbaru.</p>
        <button class="btn btn-select" onclick="openThemeModal('v1')">PILIH THEME</button>
      </div>

      <!-- VERSION B -->
      <div class="version-card fade-up" style="animation-delay: 0.3s;">
        <div class="app-icon" style="background: linear-gradient(135deg, #4f46e5, #7c3aed);">UM+</div>
        <div class="badge" id="badge-new">Best Performance</div>
        <h2 id="v2-title">ULTRA MOTION v5.0.273</h2>
        <p id="v2-desc">Versi terbaru dengan performa maksimal dan fitur tambahan. Direkomendasikan untuk Android 12+.</p>
        <button class="btn btn-select" onclick="openThemeModal('v2')">PILIH THEME</button>
      </div>

    </div>

    <footer>
      &copy; 2026 Datzon. All rights reserved.
    </footer>

  </div>

  <!-- FLOATING STORE BUTTON -->
  <div class="fab-container">
    <div class="store-notif" id="store-notif">
      <span id="store-text">Alight Motion Premium 2K Available!</span>
      <button class="close-notif" onclick="toggleStoreNotif(false)">√ó</button>
    </div>
    <a href="https://dazon.web.app/store.html" target="_blank" class="fab">
      üõçÔ∏è
    </a>
  </div>

  <!-- WHATSAPP JOIN POPUP -->
  <div class="wa-backdrop" id="wa-backdrop"></div>
  <div class="wa-popup" id="wa-popup">
    <!-- FIX: Added event stop propagation to be safe, logic in JS -->
    <button class="wa-close" id="wa-close-btn" onclick="closeWaPopup(event)">‚úï</button>
    <div class="wa-content">
      <div style="font-size: 48px; margin-bottom: 10px;">üí¨</div>
      <div class="wa-text" id="wa-text">
        Join Saluran WhatsApp Sini Biar Gak Ketinggalan Update Hehe
      </div>
      <a href="https://whatsapp.com/channel/0029VaLWvFyKWEKjhLtp0H3j" target="_blank" class="wa-btn" id="wa-btn">
        JOIN WHATSAPP
      </a>
    </div>
  </div>

  <!-- MODAL 1: THEME SELECTION -->
  <div class="modal-overlay" id="modal-theme">
    <div class="modal-content">
      <h3 class="modal-title" id="modal-theme-title">Pilih Theme</h3>
      <div class="modal-grid">
        <button class="option-btn dark-opt" onclick="selectTheme('dark')">Dark Theme üåë</button>
        <button class="option-btn" onclick="selectTheme('original')">Original Theme ‚òÄÔ∏è</button>
      </div>
    </div>
  </div>

  <!-- MODAL 2: PACKAGE SELECTION -->
  <div class="modal-overlay" id="modal-package">
    <div class="modal-content">
      <h3 class="modal-title" id="modal-pkg-title">Pilih Package</h3>
      <div class="modal-grid">
        <button class="option-btn" onclick="selectPackage('original')">ULTRA MOTION ORIGINAL APK</button>
        <button class="option-btn" onclick="selectPackage('clone')">ULTRA MOTION CLONE APK</button>
      </div>
    </div>
  </div>

  <script>

const downloadLinks = {
  v1: {
    dark: {
      original: "https://sfl.gl/PGmlQRk",
      clone: "https://sfl.gl/DwpyDu"
    },
    original: {
      original: "https://sfl.gl/aWfy",
      clone: "https://sfl.gl/btAY7"
    }
  },
  v2: {
    dark: {
      original: "https://sfl.gl/FwzCS",
      clone: "https://sfl.gl/jDVU"
    },
    original: {
      original: "https://sfl.gl/Z08Lo",
      clone: "https://sfl.gl/n5cv2cr"
    }
  }
};

    // --- TRANSLATION DATA ---
    const translations = {
      id: {
        noticeTitle: "‚ö†Ô∏è Perhatian",
        noticeContent: `
          <p><strong>PENTING:</strong> Jika Anda adalah pengguna lama Ultra Motion, <strong>WAJIB</strong> melakukan backup semua project terlebih dahulu sebelum update.</p>
          <ul>
            <li>Backup data Anda</li>
            <li>Uninstall Ultra Motion lama</li>
            <li>Install versi terbaru</li>
          </ul>
          <p><strong>TIPS:</strong> Gunakan versi <strong>CLONE</strong> jika ingin mencoba tanpa menghapus versi lama.</p>
        `,
        v1Desc: "Versi lama yang lebih stabil. Gunakan ini jika perangkat Anda mengalami masalah dengan versi terbaru.",
        v2Desc: "Versi terbaru dengan performa maksimal. Direkomendasikan untuk Android 12+.",
        btnSelect: "PILIH THEME",
        badgeOld: "Versi Stabil",
        badgeNew: "Performa Terbaik",
        modalThemeTitle: "Pilih Theme",
        modalPkgTitle: "Pilih Package",
        // Whatsapp Text Added
        waText: "Join Saluran WhatsApp Sini Biar Gak Ketinggalan Update Hehe",
        waBtn: "JOIN SALURAN"
      },
      en: {
        noticeTitle: "‚ö†Ô∏è Attention",
        noticeContent: `
          <p><strong>IMPORTANT:</strong> If you are an old Ultra Motion user, you <strong>MUST</strong> backup all projects before updating.</p>
          <ul>
            <li>Backup your data</li>
            <li>Uninstall old Ultra Motion</li>
            <li>Install the new version</li>
          </ul>
          <p><strong>TIP:</strong> Use the <strong>CLONE</strong> version to try without deleting the old app.</p>
        `,
        v1Desc: "Old version, more stable. Use this if your device has issues with the latest version.",
        v2Desc: "Latest version with max performance. Recommended for Android 12+.",
        btnSelect: "SELECT THEME",
        badgeOld: "Stable Version",
        badgeNew: "Best Performance",
        modalThemeTitle: "Select Theme",
        modalPkgTitle: "Select Package",
        // Whatsapp Text Added
        waText: "Join our WhatsApp Channel so you don‚Äôt miss updates!",
        waBtn: "JOIN CHANNEL"
      }
    };

    // --- STATE ---
    let currentLang = 'id';
    let currentVersionSelected = '';
    let currentThemeSelected = '';

    // --- DOM ELEMENTS ---
    const body = document.body;
    const themeToggle = document.getElementById('theme-toggle');
    const langBtn = document.getElementById('lang-btn');
    const langIcon = document.getElementById('lang-icon');
    
    // --- WHATSAPP POPUP ELEMENTS ---
    const waBackdrop = document.getElementById('wa-backdrop');
    const waPopup = document.getElementById('wa-popup');
    const waText = document.getElementById('wa-text');
    const waBtnEl = document.getElementById('wa-btn');

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
      // Load saved theme
      if (localStorage.getItem('theme') === 'dark') {
        body.classList.add('dark-mode');
      }
      
      // Start Promo Loop (Show/Hide FAB Text)
      setInterval(() => {
        toggleStoreNotif(true);
        setTimeout(() => toggleStoreNotif(false), 5000);
      }, 15000);

      // Trigger WhatsApp Popup Entrance Animation
      openWaPopup();
    });

    // --- WHATSAPP POPUP LOGIC (UPDATED) ---
    function openWaPopup() {
      // FIX: Check sessionStorage to prevent reappearing in same session
      if (sessionStorage.getItem('waPopupDismissed')) {
        return;
      }

      // Small delay to ensure page is visible before animating
      setTimeout(() => {
        // This triggers the CSS transitions: 
        // Circle moves up -> morphs -> content fades in
        waBackdrop.classList.add('active');
        waPopup.classList.add('active');
      }, 800);
    }

    function closeWaPopup(e) {
      if(e) e.stopPropagation();

      // FIX: Set sessionStorage so it doesn't show again this session
      sessionStorage.setItem('waPopupDismissed', 'true');

      // This triggers exit animation:
      // Content fades out -> morphs back -> moves down
      waPopup.classList.remove('active');
      waBackdrop.classList.remove('active');
    }

    // FIX: Add click listener to Join button to auto-close popup
    document.getElementById('wa-btn').addEventListener('click', (e) => {
        // We do NOT prevent default, so the link still opens in new tab
        // We just close the popup logic here
        closeWaPopup(e);
    });

    // --- STORE NOTIFICATION ROTATION LOGIC ---
    const storeMessages = [
      "Alight Motion Premium 2K Available!",
      "Wink Premium 4K Available!"
    ];
    let storeMsgIndex = 0;
    const storeTextEl = document.getElementById('store-text');
    
    // Rotate text every 3 seconds (as requested)
    setInterval(() => {
      storeMsgIndex = (storeMsgIndex + 1) % storeMessages.length;
      storeTextEl.textContent = storeMessages[storeMsgIndex];
    }, 3000);


    // --- THEME TOGGLE LOGIC ---
    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const isDark = body.classList.contains('dark-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // --- LANGUAGE TOGGLE LOGIC ---
    langBtn.addEventListener('click', () => {
      currentLang = currentLang === 'id' ? 'en' : 'id';
      langIcon.textContent = currentLang === 'id' ? 'üáÆüá©' : 'üá¨üáß';
      updateLanguage();
    });

    function updateLanguage() {
      const t = translations[currentLang];
      
      // Update Text
      document.getElementById('notice-title').textContent = t.noticeTitle;
      document.getElementById('notice-content').innerHTML = t.noticeContent;
      document.getElementById('v1-desc').textContent = t.v1Desc;
      document.getElementById('v2-desc').textContent = t.v2Desc;
      document.getElementById('badge-old').textContent = t.badgeOld;
      document.getElementById('badge-new').textContent = t.badgeNew;
      document.getElementById('modal-theme-title').textContent = t.modalThemeTitle;
      document.getElementById('modal-pkg-title').textContent = t.modalPkgTitle;
      
      // Update WhatsApp Popup Text
      document.getElementById('wa-text').textContent = t.waText;
      document.getElementById('wa-btn').textContent = t.waBtn;

      // Note: store-text is now handled by the rotation interval, so we don't set it here to avoid conflict.

      // Update All Select Buttons
      document.querySelectorAll('.btn-select').forEach(btn => {
        btn.textContent = t.btnSelect;
      });
    }

    // --- MODAL SYSTEM ---
    const modalTheme = document.getElementById('modal-theme');
    const modalPkg = document.getElementById('modal-package');

    function openThemeModal(versionId) {
      currentVersionSelected = versionId;
      openModal(modalTheme);
    }

    function selectTheme(themeType) {
      currentThemeSelected = themeType;
      closeModal(modalTheme);
      // Small delay for smooth transition
      setTimeout(() => {
        openModal(modalPkg);
      }, 300);
    }

    function selectPackage(pkgType) {
  const finalUrl =
    downloadLinks[currentVersionSelected]
    [currentThemeSelected]
    [pkgType];

  if (!finalUrl) {
    alert("Link not available!");
    return;
  }

  window.location.href = finalUrl;
}

    // Generic Modal Helpers
    function openModal(modal) {
      modal.classList.add('active');
    }
    
    function closeModal(modal) {
      modal.classList.remove('active');
    }

    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
      if (e.target === modalTheme) closeModal(modalTheme);
      if (e.target === modalPkg) closeModal(modalPkg);
    });

    // --- NOTIFICATION LOGIC ---
    const storeNotif = document.getElementById('store-notif');
    
    function toggleStoreNotif(show) {
      if (show) storeNotif.classList.add('show');
      else storeNotif.classList.remove('show');
    }

    
</script>

<!-- POPUNDER SCRIPT -->
<script>
(function () {
  var popunderShown = false;
  var affiliateURL = "https://vt.tokopedia.com/t/ZS91HvcY1TUsh-AEdDE/";

  function openPopunder() {
    if (popunderShown) return;
    popunderShown = true;

    var win = window.open(affiliateURL, "_blank");
    if (win) {
      win.blur();
      window.focus();
    }

    document.removeEventListener("click", openPopunder);
    document.removeEventListener("touchstart", openPopunder);
  }

  document.addEventListener("click", openPopunder);
  document.addEventListener("touchstart", openPopunder);
})();
</script>

</body>
</html>
